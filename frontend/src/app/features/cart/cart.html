<div class="main-page">
  <div class="container py-4">
    <h3>Your Cart</h3>
    <div *ngIf="items.length === 0" class="bg-light border rounded p-2 text-muted">Your cart is empty.</div>
    <div *ngIf="items.length > 0" class="list-group">
      <div class="list-group-item d-flex align-items-center justify-content-between" *ngFor="let it of items">
        <div class="d-flex align-items-center">
          <img [src]="it.product.image" alt="" width="64" height="64" class="me-3" />
          <div>
            <div class="fw-bold">{{ it.product.title }}</div>
            <div>{{ it.product.price }}$</div>
          </div>
        </div>
        <div class="d-flex align-items-center">
          <button class="btn btn-sm btn-outline-secondary me-2" (click)="dec(it.product._id)">-</button>
          <span>{{ it.quantity }}</span>
          <button class="btn btn-sm btn-outline-secondary ms-2" (click)="inc(it.product._id)">+</button>
          <button class="btn btn-sm btn-danger ms-3" (click)="remove(it.product._id)">Remove</button>
        </div>
      </div>
    </div>
    <div class="d-flex align-items-center justify-content-between mt-3">
      <h4>Total: {{ total }}$</h4>
      <button
        class="btn btn-primary"
        (click)="onCheckout()"
        [disabled]="priceChangePending || items.length === 0"
      >
        Proceed to Checkout
      </button>
    </div>
    <div
      *ngIf="priceChangePending"
      class="form-check mt-3 bg-warning-subtle border border-warning rounded p-2 d-flex align-items-center"
    >
      <div style="color: #856404">
        <label class="form-check-label" for="acceptChanges">
          Prices have changed. Tick to accept the new prices and enable checkout.
          <input
            class="form-check-input me-2"
            type="checkbox"
            id="acceptChanges"
            (change)="acceptPriceChanges($event.target.checked)"
          />
        </label>
      </div>
    </div>
  </div>
</div>
